<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Creating &amp; managing signals · SignalAnalysis.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">SignalAnalysis.jl</span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href="signals.html">Creating &amp; managing signals</a></li><li><a class="tocitem" href="generate.html">Generating signals</a></li><li><a class="tocitem" href="basic.html">Basic signal analysis</a></li><li><a class="tocitem" href="dsp.html">Signal processing</a></li><li><a class="tocitem" href="rand.html">Random noise generation</a></li><li><a class="tocitem" href="plot.html">Plot recipes</a></li><li><a class="tocitem" href="iplot.html">Interactive plotting</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href="signals.html">Creating &amp; managing signals</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="signals.html">Creating &amp; managing signals</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/org-arl/SignalAnalysis.jl/blob/master/docs/src/signals.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Creating-and-managing-signals-1"><a class="docs-heading-anchor" href="#Creating-and-managing-signals-1">Creating &amp; managing signals</a><a class="docs-heading-anchor-permalink" href="#Creating-and-managing-signals-1" title="Permalink"></a></h1><p>Signals are represented by array-like data types with a series (time, frequency or space domain) per column. The <code>SampleBuf</code> data type wraps an array and carries sampling rate as metadata with it. This allows the API to be used without having to specify sampling rate at each call. However, if a user prefers to use other array-like data types, the sampling rate may be provided as a <code>fs</code> keyword argument for API calls that require sampling rate.</p><p>All code examples in this manual assume you have imported <code>SignalAnalysis</code> and <code>SignalAnalysis.Units</code>:</p><pre><code class="language-julia">using SignalAnalysis, SignalAnalysis.Units</code></pre><p>The <code>SignalAnalysis.Units</code> package re-exports commonly used units (<code>s</code>, <code>ms</code>, <code>Hz</code>, <code>kHz</code>, etc) from <code>Unitful.jl</code>.</p><h3 id="Creating-and-wrapping-signals-1"><a class="docs-heading-anchor" href="#Creating-and-wrapping-signals-1">Creating and wrapping signals</a><a class="docs-heading-anchor-permalink" href="#Creating-and-wrapping-signals-1" title="Permalink"></a></h3><p>Signals wrapped in a <code>SampleBuf</code> data type may be easily created using <code>signal()</code>:</p><pre><code class="language-julia">x = signal(data, fs)</code></pre><p>Properties such as frame rate (sampling rate), number of channels, etc may be accessed using the <a href="https://github.com/haberdashPI/SignalBase.jl"><code>SignalBase</code></a> API. The signals can be treated as arrays, but carry sampling rate metadata with them. While most operations infer metadata from the input signal, some operations may be unable to automatically infer the frame rate of the output signal. In such cases, the <code>@rate</code> and <code>@samerateas</code> macros prove handy:</p><pre><code class="language-julia"># create a 1-second signal sampled at 20 kHz
y = @rate 20kHz randn(20000)

# use DSP.filt() to filter a signal and set output signal sampling rate to be
# the same as y
y = @samerateas y filt(lpf, y)    

# use DSP.resample() to resample a signal and set output signal sampling rate
# to be 2/3 that of y
y = @samerateas 2//3 y resample(y, 2//3)</code></pre><h3 id="Processing-signals-block-by-block-1"><a class="docs-heading-anchor" href="#Processing-signals-block-by-block-1">Processing signals block-by-block</a><a class="docs-heading-anchor-permalink" href="#Processing-signals-block-by-block-1" title="Permalink"></a></h3><p>When processing long signals, it is common to break the signal into blocks, process each block, and collect the results. To simplify this, we have <code>slide()</code> to slide a window along the data, and call a function on each window:</p><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.slide" href="#SignalAnalysis.slide"><code>SignalAnalysis.slide</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">slide(f::Function, s::AbstractVector, nframes, overlap=0, args...; showprogress=true)</code></pre><p>Slides a window over a signal, processing each window. If the total number of frames in the signal is not an integral multiple of <code>nframes</code>, the last incomplete block of samples remains unprocessed.</p><p>The processing function receives a view on the original signal, and therefore may modify the signal if desired.</p><p><strong>Examples:</strong></p><pre><code class="language-julia-repl">julia&gt; x = signal(ones(1000), 8kHz);
julia&gt; slide(x, 250) do x1, blknum, firstframe
         println(size(x1), &quot;, &quot;, blknum, &quot;, &quot;, firstframe)
       end
(250,), 1, 1
(250,), 2, 251
(250,), 3, 501
(250,), 4, 751

julia&gt; slide(x, 250) do x1, blknum, firstframe
         x1 .= blknum
       end

julia&gt; x[1], x[251], x[501], x[751]
(1.0, 2.0, 3.0, 4.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L131-L159">source</a></section></article><p>The function <code>f</code> is called for each block with 3 arguments:</p><ul><li><code>x</code>: windowed view of the original array</li><li><code>blknum</code>: block number</li><li><code>firstframe</code>: frame number of the first frame in the window</li></ul><p>The results can be optionally collated by providing the return data type as the second argument of <code>slide()</code>:</p><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.slide-Union{Tuple{T}, Tuple{Function,Type{T},AbstractArray{T,1} where T,Any}, Tuple{Function,Type{T},AbstractArray{T,1} where T,Any,Any,Vararg{Any,N} where N}} where T" href="#SignalAnalysis.slide-Union{Tuple{T}, Tuple{Function,Type{T},AbstractArray{T,1} where T,Any}, Tuple{Function,Type{T},AbstractArray{T,1} where T,Any,Any,Vararg{Any,N} where N}} where T"><code>SignalAnalysis.slide</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">slide(f::Function, ::Type{T}, s::AbstractVector, nframes, overlap=0, args...; showprogress=true) where T</code></pre><p>Slides a window over a signal, processing each window, and collecting the results of type <code>T</code>. If the total number of frames in the signal is not an integral multiple of <code>nframes</code>, the last incomplete block of samples remains unprocessed.</p><p><strong>Examples:</strong></p><pre><code class="language-julia-repl">julia&gt; x = signal(ones(1000), 8kHz);
julia&gt; slide(Float32, x, 250) do x1, blknum, firstframe
         sum(x1)*blknum
       end
4-element Array{Float32,1}:
  250.0
  500.0
  750.0
 1000.0

julia&gt; slide(Tuple{Int,Float64}, x, 250) do x1, blknum, firstframe
          (blknum, sum(x1)*blknum)
        end
4-element Array{Tuple{Int64,Float64},1}:
  (1, 250.0)
  (2, 500.0)
  (3, 750.0)
  (4, 1000.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L173-L201">source</a></section></article><p>Blocks may optionally also be overlapped by specifying <code>noverlap</code>. Any extra arguments to <code>slide()</code> are passed on to the <code>f</code> function. An optional keyword argument <code>showprogress</code> is useful in long running operations to automatically show a progress bar.</p><h3 id="API-reference-1"><a class="docs-heading-anchor" href="#API-reference-1">API reference</a><a class="docs-heading-anchor-permalink" href="#API-reference-1" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.analytic-Tuple{SampledSignals.SampleBuf}" href="#SignalAnalysis.analytic-Tuple{SampledSignals.SampleBuf}"><code>SignalAnalysis.analytic</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">analytic(s)
</code></pre><p>Converts a signal to analytic representation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L96">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.isanalytic-Tuple{Any}" href="#SignalAnalysis.isanalytic-Tuple{Any}"><code>SignalAnalysis.isanalytic</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">isanalytic(s)
</code></pre><p>Checks if a signal is analytic.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L103">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.padded-Union{Tuple{N}, Tuple{T}, Tuple{AbstractArray{T,1},Any}} where N where T" href="#SignalAnalysis.padded-Union{Tuple{N}, Tuple{T}, Tuple{AbstractArray{T,1},Any}} where N where T"><code>SignalAnalysis.padded</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">padded(s, padding; delay, fill)
</code></pre><p>Generates a padded view of a signal with optional delay/advance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L116">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.samples-Tuple{SampledSignals.SampleBuf}" href="#SignalAnalysis.samples-Tuple{SampledSignals.SampleBuf}"><code>SignalAnalysis.samples</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">samples(s)
</code></pre><p>Gets the underlying samples in the signal.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L109">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.signal-Tuple{AbstractArray,Any}" href="#SignalAnalysis.signal-Tuple{AbstractArray,Any}"><code>SignalAnalysis.signal</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">signal(x, fs)
</code></pre><p>Creates a signal with frame rate <code>fs</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.signal-Tuple{SampledSignals.SampleBuf,Any}" href="#SignalAnalysis.signal-Tuple{SampledSignals.SampleBuf,Any}"><code>SignalAnalysis.signal</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">signal(x, fs)
</code></pre><p>Creates a signal with frame rate <code>fs</code>. If the original signal&#39;s frame rate is the same as <code>fs</code>, this method simply returns the original signal. Otherwise, it creates a new signal with the specified frame rate and data from the original signal. Do note that this method does not resample the signal.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.toframe-Tuple{Any,SampledSignals.SampleBuf}" href="#SignalAnalysis.toframe-Tuple{Any,SampledSignals.SampleBuf}"><code>SignalAnalysis.toframe</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">toframe(t, s)
</code></pre><p>Converts time to signal frame number.</p><p><strong>Examples:</strong></p><pre><code class="language-julia-repl">julia&gt; x = signal(randn(2000), 8kHz);
julia&gt; toframe(0.2s, x)
1601

julia&gt; toframe([0.2s, 201ms], x)
2-element Array{Int64,1}:
 1601
 1609

julia&gt; toframe(0.2:0.01:0.3, x)
 11-element Array{Int64,1}:
  1601
  1681
  1761
   ⋮</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L217">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.@rate-Tuple{Any,Any}" href="#SignalAnalysis.@rate-Tuple{Any,Any}"><code>SignalAnalysis.@rate</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@rate fs expr</code></pre><p>Creates a signal from <code>expr</code> with frame rate <code>fs</code>. It provides syntactic sugar on the <a href="signals.html#SignalAnalysis.signal-Tuple{AbstractArray,Any}"><code>signal</code></a> method.</p><p><strong>Example:</strong></p><pre><code class="language-julia-repl">julia&gt; x = @rate 44.1kHz randn(44100)
44100-frame, 1-channel SampleBuf{Float64, 1}
1.0s sampled at 44100.0Hz</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L32-L43">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.@samerateas-Tuple{Any,Any,Any}" href="#SignalAnalysis.@samerateas-Tuple{Any,Any,Any}"><code>SignalAnalysis.@samerateas</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@samerateas n x expr</code></pre><p>Creates a signal from <code>expr</code> with the a frame rate <code>n</code> times that of signal <code>x</code>.</p><p><strong>Examples:</strong></p><pre><code class="language-julia-repl">julia&gt; x = @rate 44.1kHz randn(44100)
44100-frame, 1-channel SampleBuf{Float64, 1}
1.0s sampled at 44100.0Hz

julia&gt; y = @samerateas 1//2 x x[1:2:end]
22050-frame, 1-channel SampleBuf{Float64, 1}
1.0s sampled at 22050.0Hz

julia&gt; y = @samerateas 2//3 x resample(x, 2//3)
29400-frame, 1-channel SampleBuf{Float64, 1}
1.0s sampled at 29400.0Hz</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L73-L91">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="SignalAnalysis.@samerateas-Tuple{Any,Any}" href="#SignalAnalysis.@samerateas-Tuple{Any,Any}"><code>SignalAnalysis.@samerateas</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@samerateas x expr</code></pre><p>Creates a signal from <code>expr</code> with the same frame rate as signal <code>x</code>. This is useful to preserve frame rate metadata across functions that do not return a signal.</p><p><strong>Examples:</strong></p><pre><code class="language-julia-repl">julia&gt; x = @rate 44.1kHz randn(44100)
44100-frame, 1-channel SampleBuf{Float64, 1}
1.0s sampled at 44100.0Hz

julia&gt; y = filt([1.0,0.5], x)     # frame rate stripped by DSP.filt
44100-element Array{Float64,1}:
   ⋮

julia&gt; y = @samerateas x filt([1.0,0.5], x)
44100-frame, 1-channel SampleBuf{Float64, 1}
1.0s sampled at 44100.0Hz</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/org-arl/SignalAnalysis.jl/blob/bd49e59937fbd510465be819968faca9055a7d35/src/signals.jl#L48-L68">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« Home</a><a class="docs-footer-nextpage" href="generate.html">Generating signals »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 21 March 2020 16:14">Saturday 21 March 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
